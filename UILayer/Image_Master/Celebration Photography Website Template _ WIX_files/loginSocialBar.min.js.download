"use strict";define("loginSocialBar/components/loginSocialBar",["react","lodash","core","santaProps","utils"],function(t,e,i,n,o){function s(t){return t.loggedInMember===l.AVATAR||t.loggedInMember===l.BOTH}function r(t){return t.loggedInMember===l.TEXT||t.loggedInMember===l.BOTH}function p(t){var e=t.siteMembersAspect.isLoggedIn();return{isLoggedIn:e,$loggedIn:e?"loggedIn":"loggedOut",$direction:"rtl"===t.compProp.buttonsDirection?"rtl":"ltr"}}function c(t){switch(t.compProp.dropDownTextAlignment){case"left":return"rtl"===t.compProp.buttonsDirection?"flex-end":"flex-start";case"right":return"rtl"===t.compProp.buttonsDirection?"flex-start":"flex-end";case"center":return"center";default:return"flex-start"}}var a=o.linkRenderer,l={AVATAR:"avatarOnly",TEXT:"textOnly",BOTH:"avatarAndText"};return{displayName:"loginSocialBar",mixins:[i.compMixins.skinBasedComp],propTypes:{compData:n.Types.Component.compData.isRequired,compProp:n.Types.Component.compProp.isRequired,isMobileView:n.Types.isMobileView.isRequired,rootNavigationInfo:n.Types.Component.rootNavigationInfo.isRequired,linkRenderInfo:n.Types.Link.linkRenderInfo.isRequired,siteMembersAspect:n.Types.SiteAspects.siteMembers.isRequired,membersAreaAspect:n.Types.SiteAspects.membersAreaAspect,buttonsToRender:t.PropTypes.arrayOf(t.PropTypes.shape({text:t.PropTypes.string,icon:t.PropTypes.string,onClick:t.PropTypes.func,badge:t.PropTypes.shape({notifications:t.PropTypes.arrayOf(t.PropTypes.string),icon:t.PropTypes.string})}))},statics:{useSantaTypes:!0},getInitialState:function(){return e.assign(p(this.props),{isMenuOpen:!1})},createLoginSocialButtonComponent:function(t,i){return this.createChildComponent(this.props.compData,"wysiwyg.viewer.components.LoginSocialButton","button",e.assign(t,{ref:"button"+i,id:this.props.id+"button"+i,style:{width:this.props.compProp.iconSize,height:this.props.compProp.iconSize,marginRight:"rtl"===this.props.compProp.buttonsDirection?"auto":this.props.compProp.spacing,marginLeft:"rtl"===this.props.compProp.buttonsDirection?this.props.compProp.spacing:"auto"},linkRenderInfo:this.props.linkRenderInfo,rootNavigationInfo:this.props.rootNavigationInfo,iconSize:this.props.compProp.iconSize}))},getButtonsToRender:function(){return e.map(this.props.compData.iconItems,this.createLoginSocialButtonComponent)},onUserClick:function(){this.setState({isMenuOpen:!this.state.isMenuOpen})},onLogout:function(){this.props.siteMembersAspect.logout("en")},getMenuItems:function(){var i=e.filter(this.props.compData.menuItems,this.props.isMobileView?"isVisibleMobile":"isVisible"),n=e.concat(i||[],{label:this.props.compData.logOutText||"Log Out",icon:"http://cdn.onlinewebfonts.com/svg/img_231651.svg",onClick:this.onLogout}),o=c(this.props);return e.map(n,function(i,s){var r={};return i.link&&(r=a.renderLink(i.link,this.props.linkRenderInfo,this.props.rootNavigationInfo)),t.DOM.div({key:"item"+s,children:[t.DOM.a(e.assign({children:[t.DOM.img({src:i.icon,style:{width:20,height:20}}),t.DOM.span({children:i.label})],style:{justifyContent:o}},r)),s===n.length-1?null:t.DOM.hr()],onClick:i.onClick||null})}.bind(this))},getMemberName:function(){var t=this.props.compData.loggedInText+" ";if(this.state.isLoggedIn){var i=this.props.siteMembersAspect.getMemberDetails();i&&(t+=e.get(i,"attributes.name")||i.name||i.email)}return t},getMemberAvatar:function(){var t="https://www.iconexperience.com/_img/o_collection_png/green_dark_grey/512x512/plain/user.png";return this.state.isLoggedIn&&(t=e.get(this.props.siteMembersAspect.getMemberDetails(),"attributes.imageUrl")||t),t},componentWillReceiveProps:function(t){var i=p(t);e.isMatch(this.state,i)||this.setState(i)},onLoginButtonClick:function(){this.props.siteMembersAspect.showAuthenticationDialog({language:"en",appId:3})},getSkinProperties:function(){var i={"":{style:{direction:this.props.compProp.buttonsDirection||"ltr"}}};return this.state.isLoggedIn?e.assign(i,{buttons:{children:this.getButtonsToRender()},user:{onClick:this.onUserClick},icon:{children:t.DOM.img({src:this.getMemberAvatar(),style:{display:s(this.props.compData)?null:"none",width:this.props.compProp.iconSize,height:this.props.compProp.iconSize}})},text:{children:this.getMemberName(),style:{display:r(this.props.compData)?null:"none"}},dropdownMenu:{children:this.state.isMenuOpen?this.getMenuItems():null}}):e.assign(i,{login:{children:this.props.compData.loggedOutText||"Login / Sign up",onClick:this.onLoginButtonClick}}),i},getDefaultSkinName:function(){return"wysiwyg.viewer.skins.LoginSocialBarSkin"}}}),define("loginSocialBar/components/loginSocialButton",["react","lodash","core","utils"],function(t,e,i,n){var o=n.linkRenderer;return{displayName:"loginSocialButton",mixins:[i.compMixins.skinBasedComp],propTypes:{label:t.PropTypes.string,icon:t.PropTypes.string,link:t.PropTypes.object,counter:t.PropTypes.number},statics:{useSantaTypes:!0},getInitialState:function(){return{$direction:"rtl"===this.props.compProp.buttonsDirection?"rtl":"ltr"}},onButtonClick:function(){this.props.onClick&&this.props.onClick()},createBadge:function(){var e=null,i=this.props.iconSize/2;return this.props.counter>0&&(e=t.DOM.div({children:this.props.counter,style:{width:i,height:i,lineHeight:i+"px"}})),e},getSkinProperties:function(){return{"":{onClick:this.onButtonClick},link:this.props.link?o.renderLink(this.props.link,this.props.linkRenderInfo,this.props.rootNavigationInfo):null,img:{children:t.DOM.img({src:this.props.icon,style:this.props.style})},badge:{children:this.createBadge()}}},getDefaultSkinName:function(){return"wysiwyg.viewer.skins.LoginSocialButtonSkin"}}}),define("loginSocialBar",["loginSocialBar/components/loginSocialBar","loginSocialBar/components/loginSocialButton"],function(t,e){return{loginSocialBar:t,loginSocialButton:e}});
//# sourceMappingURL=loginSocialBar.min.js.map