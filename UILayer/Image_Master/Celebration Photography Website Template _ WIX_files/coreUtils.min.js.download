"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};define("coreUtils/core/ajaxLibrary",["lodash"],function(t){function e(t){if("function"!=typeof t)throw"ajaxMethod must be a function";n=t}var n=function(){throw"must register ajax function: zepto $.ajax for clientSide, or request() for serverSide"};return{register:e,ajax:function(e){return e.asForm?e.contentType="application/x-www-form-urlencoded":"POST"===e.type&&"json"===e.dataType&&t.isObject(e.data)&&!e.asForm&&t.assign(e,{data:JSON.stringify(e.data),contentType:e.contentType||"application/json; charset=utf-8",processData:!1}),n(e)},get:function(t,e,r,a){if("object"===(void 0===t?"undefined":_typeof(t)))return n(t);var i={url:t};return e&&(i.data=e),r&&(i.success=r),a&&(i.dataType=a),n(i)}}}),define("coreUtils/core/domMeasurements",["zepto","lodash"],function(t,e){function n(t){var e=window.getComputedStyle(t);return{top:parseFloat(e.getPropertyValue("border-top-width"),10),left:parseFloat(e.getPropertyValue("border-left-width"),10)}}function r(t,e){for(var r=t.offsetTop,a=t.offsetLeft,i=t.offsetWidth,o=t.offsetHeight,s={top:0,left:0};t.offsetParent&&(t=t.offsetParent,s=n(t),r+=s.top,a+=s.left,!e||t!==e);)r+=t.offsetTop,a+=t.offsetLeft;return{top:r,left:a,width:i,height:o,bottom:r+o,right:a+i}}function a(t,e,n){n=n||"undefined"!=typeof window&&window;var a=r(t,e);if(n){var i=n.pageYOffset||n.scrollTop||0,o=n.pageXOffset||n.scrollLeft||0;a.top-=i,a.bottom-=i,a.left-=o,a.right-=o}return a}function i(n,a,o,s){return s=s||r(n,a),o=o||t(n).children("div"),e.forEach(o,function(e){var n=r(e,a);n.width>0&&n.height>0&&(n.left<s.left&&(s.left=n.left),n.right>s.right&&(s.right=n.right),n.top<s.top&&(s.top=n.top),n.bottom>s.bottom&&(s.bottom=n.bottom));var o=t(e),c=o.children("div");c.length&&"hidden"!==o.css("overflow")&&i(e,a,c,s)}),s.width=s.right-s.left,s.height=s.bottom-s.top,s}function o(t,e,n){n=n||"undefined"!=typeof window&&window;var r=i(t,e);if(n){var a=n.pageYOffset||n.scrollTop||0,o=n.pageXOffset||n.scrollLeft||0;r.top-=a,r.bottom-=a,r.left-=o,r.right-=o}return r}return{getElementRect:r,getBoundingRect:a,getContentRect:i,getBoundingContentRect:o}}),define("coreUtils/core/languages",[],function(){return["de","en","es","fr","it","ja","ko","pl","ru","nl","tr","sv","pt","no","da","hi","zh","cs"]}),define("coreUtils/core/SiteDataPrivates",["lodash"],function(t){function e(){this.name="_privates_"+n,n++}if("undefined"!=typeof WeakMap)return WeakMap;var n=0;return e.prototype.set=function(t,e){t[this.name]=e},e.prototype.get=function(t){return t[this.name]},e.prototype.delete=function(t){delete t[this.name]},e.prototype.has=function(e){return t.has(e,this.name)},e}),define("coreUtils/core/pathValidationUtil",["lodash","coreUtils/core/SiteDataPrivates"],function(t,e){function n(e,n,r){if(!t.isArray(e))throw new Error("path type is not an array - "+e);if(!a(n,e,r))throw new Error("path does not exist - "+e);return!0}function r(e,n,r){if(!n)return!1;var a=o(e,n,n.length);return!t.isUndefined(a)&&(!r||r(a))}function a(e,n,r){if(!n||!t.isArray(n))return!1;var a=n[n.length-1],i=o(e,n,r?n.length:n.length-1);return!t.isUndefined(i)&&(!!r||s(a,i))}function i(e,n,r){for(var a=e,i=0;i<n&&(a=a[r[i]],!t.isUndefined(a));i++);return a}function o(e,n,r){var a=t.take(n,r);if(n&&"pagesData"===n[0]&&!t.isEmpty(e.pagesDataRaw))return 0===a.length?e.pagesDataRaw:t.get(e.pagesDataRaw,a);var o=l.get(e);return t.get(o,"mobxDataHandlers.getObservableByPath")?o.mobxDataHandlers.getObservableByPath(e,a):i(e,r,n)}function s(e,n){return t.isNumber(e)?t.isArray(n):!!t.isString(e)&&c(n)}function c(t){return"[object Object]"===Object.prototype.toString.call(t)}function u(e,n){var r=l.get(e);l.set(e,t.assign(r,{mobxDataHandlers:n}))}var l=new e;return{setMobxDataHandlers:u,validatePath:n,validatePathExist:a,validatePathExistsAndCorrect:r}}),define("coreUtils/dal/DisplayedJsonDal",["lodash","coreUtilsLib","coreUtils/core/pathValidationUtil"],function(t,e,n){function r(t,e,r){return n.validatePathExist(t,e,r)}function a(e,n){var r=[].concat(n),a=r.pop(),i=t.get(e,r,e);t.isString(a)?delete i[a]:i.splice(a,1)}function i(e,n){var r=this.getByPath(e),a=t.assign({},r,n);this.setByPath(e,a)}function o(t,e,n,r){0===t?e.unshift(n):e.splice(t,0,n),this.setByPath(r,e)}function s(e,n){var r=t.get(e,n);if(!t.isPlainObject(r))throw new Error("Can not get keys of an element that isn't a plain object");return t.keys(r)}var c=e.objectUtils.cloneDeep,u=function(t,e,n){this.pointersCache=e,this.jsonData=t,this.jsonData.pagesDataRaw={},this.mobxDataHandlers=n||{}};return u.prototype={get:function(t,e){var n=this.pointersCache.getPath(t);return this.getByPath(n,e)},getByPath:function(e,n){if(e)return this.mobxDataHandlers.getByPath?this.mobxDataHandlers.getByPath(this.jsonData,e,n):c(t.get(this.jsonData,e))},set:function(t,e){var n=this.pointersCache.getPath(t,!0);this.setByPath(n,e)},setByPath:function(e,n){if(!t.isArray(e))throw new Error("path type is not an array - "+e);this.mobxDataHandlers.setByPath?this.mobxDataHandlers.setByPath(this.jsonData,e,n):t.set(this.jsonData,e,c(n)),this.pointersCache.resetValidations()},isExist:function(t){return!!this.pointersCache.getPath(t)},isPathExist:function(t){return this.mobxDataHandlers.getObservableByPath&&this.mobxDataHandlers.getObservableByPath(this.jsonData,t),r(this.jsonData,t,!0)},merge:function(t,e){if(this.isExist(t)){var n=this.pointersCache.getPath(t);this.mergeByPath(n,e)}},mergeByPath:function(e,n){if(r(this.jsonData,e,!0)&&t.isPlainObject(n))this.mobxDataHandlers.mergeByPath?this.mobxDataHandlers.mergeByPath(this.jsonData,e,n):i.call(this,e,n),this.pointersCache.resetValidations();else if(!t.isPlainObject(n))throw new Error(n+" is not an object")},push:function(e,n,r,a){if(!this.isExist(e))throw new Error(JSON.stringify(e)+" path does not exist");var i=this.pointersCache.getPath(e);if(!t.isUndefined(a)&&!t.isNumber(a))throw new Error("push index arguments should be a number");if(this.pushByPath(i,n,a),r){var o=i.concat(a);this.pointersCache.setPath(r,o)}},pushByPath:function(e,n,r){var a;if(a=this.mobxDataHandlers.getObservableByPath?this.mobxDataHandlers.getObservableByPath(this.jsonData,e):this.getByPath(e),(r=t.isNumber(r)?r:a.length)>a.length||r<0)throw new Error("Index out of bound");this.mobxDataHandlers.pushByPath?this.mobxDataHandlers.pushByPath(this.jsonData,r,a,n,e):o.call(this,r,a,n,e),this.pointersCache.resetValidations()},remove:function(t){if(!this.isExist(t))throw new Error(t+" pointer does not exist");var e=this.pointersCache.getPath(t);this.removeByPath(e)},removeByPath:function(t){if(!t)throw new Error("path is not valid");this.mobxDataHandlers.removeByPath?this.mobxDataHandlers.removeByPath(this.jsonData,t):a(this.jsonData,t),this.pointersCache.resetValidations()},getKeys:function(t,e){var n=this.pointersCache.getPath(t);if(n)return this.getKeysByPath(n,e)},getKeysByPath:function(t,e){return n.validatePath(t,this.jsonData),this.mobxDataHandlers.getKeysByPath?this.mobxDataHandlers.getKeysByPath(this.jsonData,t,e):s(this.jsonData,t)},getStructureProperty:function(e){var n=this.pointersCache.getPath(e,!0);return t.has(this.jsonData.pagesDataRaw,n)||t.get(this.jsonData,t.slice(n,0,3),{}).isStructureNode||this.setByPath(n,void 0),this.getByPath(n)}},u}),define("coreUtils/core/SessionFreezer",["lodash"],function(t){function e(t){r.push(t)}function n(){t.forEach(r,Object.freeze)}var r=[];return{freeze:e,start:n}}),define("coreUtils/pointers/pointerGeneratorsRegistry",["coreUtils/core/SessionFreezer"],function(t){var e={},n={},r={},a={};return t.freeze(e),t.freeze(n),t.freeze(r),t.freeze(a),{registerDataAccessPointersGenerator:function(t,a,i){i?n[t]=a:e[t]=a,r[t]=a},registerPointerType:function(t,e,n,r,i){a[t]={findItemFunction:e,identityCheckFunction:n,isUsingDifferentNameSpaceForFull:r,isExistInFullJson:i}},getRegularJsonGenerators:function(){return e},getBothRegularAndFullJsonGenerators:function(){return n},getAllTypes:function(){return a}}}),define("coreUtils/pointers/pointersCache",["lodash","coreUtils/core/pathValidationUtil","coreUtils/pointers/pointerGeneratorsRegistry","multilingual","experiment"],function(t,e,n,r,a){function i(e,n){var r=e;return t.forEach(n,function(e){if(t.isUndefined(r))return!1;r=r[e]}),r}function o(t,e){if(!t)return!e;if(!e||e.length!==t.length)return!1;for(var n=0;n<t.length;++n)if(t[n]!==e[n])return!1;return!0}function s(e,r,o,s){this.initMyState(),this.json=r,this.fullJson=o,this.siteData=e;var c=t.get(s,"getItemInPath",i);this.getItemInPath=c.bind(null,r),this.fullJsonGetItemInPath=c.bind(null,o),this.validated={},this.hasMultilingualExperiment=a.isOpen("sv_multilingual",this.siteData);var u=n.getAllTypes();t.forOwn(u,function(t,e){this.cache[e]={},this.itemFinders[e]=t.findItemFunction,this.identityCheckers[e]=t.identityCheckFunction,this.identityCheckersCache[e]={},t.isUsingDifferentNameSpaceForFull&&(this.fullJsonCache[e]={}),t.isExistInFullJson&&(this.typesExistingInFullJson[e]=!0)}.bind(this))}function c(t,n,r,a,i){var o=this.validated[t]||d;if(a)return o||(e.validatePathExist(i,r,!1)?h:d);if(o!==p){var s=this.identityCheckersCache[n.type],c=s[n.id];c||(c=this.identityCheckers[n.type].bind(this,n.id),s[n.id]=c),o=e.validatePathExistsAndCorrect(i,r,c)?p:d}return o}function u(t,e,n,r){var a=null,i=this.itemFinders[t.type];return i&&(a=i(this.siteData.getAllPossiblyRenderedRoots(),r,t),e[t.id]=a||n),a}function l(t,e){var n=e?"|":",";return t.id+n+t.type}function g(n,a,i){var o=n&&this.fullJsonCache.hasOwnProperty(a.type),s=o?this.fullJsonCache:this.cache,g=n&&this.typesExistingInFullJson.hasOwnProperty(a.type),h=g?this.fullJson:this.json,f=g?this.fullJsonGetItemInPath:this.getItemInPath,P=s[a.type];if(!P)return null;var m=P[a.id],v=i&&t.isEmpty(a.innerPath),y=l(a,o),D=c.call(this,y,a,m,v,h);if(D===d&&(D=(m=v?null:u.call(this,a,P,m,f))?p:this.validated[y]||d),this.validated[y]=D,m&&a.innerPath&&(m=m.concat(a.innerPath),!e.validatePathExist(h,m,!i)))return null;if(this.hasMultilingualExperiment&&t.has(a,"multilingual")&&t.includes(m,"pagesData")){var E=r.getTranslationPath(m,t.indexOf(m,"data")),I=a.multilingual===r.PointerOperation.GET;if(e.validatePathExist(h,E,I))return E}return m}var d=0,h=1,p=2;return s.prototype={initMyState:function(){this.cache={general:{}},this.fullJsonCache={},this.itemFinders={general:function(){return null}},this.identityCheckers={general:function(){return!0}},this.identityCheckersCache={},this.typesExistingInFullJson={}},getBoundCacheInstance:function(t){return{getPath:this.getPath.bind(this,t),getPointer:this.getPointer.bind(this,t),setPath:this.setPath.bind(this,t),resetValidations:this.resetValidations.bind(this)}},setPath:function(t,e,n){n&&(t?this.fullJsonCache[e.type][e.id]=n:this.cache[e.type][e.id]=n)},getPath:function(e,n,r){var a={type:n.type,id:n.id};return n.hasOwnProperty("innerPath")&&(a.innerPath=n.innerPath),this.hasMultilingualExperiment&&t.has(n,"multilingual")&&(a.multilingual=n.multilingual),g.call(this,e,a,!!r)},getPointer:function(t,e,n,r,a){var i=t&&this.fullJsonCache[n],s=i?this.fullJsonCache[n]:this.cache[n],c={type:n,id:e};return r&&(o(s[e],r)||(this.validated[l(c,i)]=d,s[e]=r)),s[e]?(a&&(c.component=a),c):null},resetValidations:function(){this.validated={}}},s}),define("coreUtils/pointers/DataAccessPointers",["lodash","coreUtils/pointers/pointerGeneratorsRegistry"],function(t,e){function n(n,r,a){var i=e.getRegularJsonGenerators();t.forEach(i,function(e,i){n[i]=t.mapValues(e,function(t){return t.bind(e,r.getItemInPath,a)})})}function r(n,r){var a=e.getBothRegularAndFullJsonGenerators();t.forEach(a,function(e,a){n[a]=t.mapValues(e,function(t){return r(t,!1,e)}),n.full[a]=t.mapValues(e,function(t){return r(t,!0,e)})})}function a(e){this.full={};var a=e.getBoundCacheInstance(!1),i=e.getBoundCacheInstance(!0),o=function(n,r,o){return function(){var s=t.toArray(arguments),c=[e.getItemInPath,a].concat(s),u=[e.fullJsonGetItemInPath,i].concat(s),l=n.apply(o,c),g=n.apply(o,u);return r?g:l}};n(this,e,a),r(this,o)}function i(t){t&&a.call(this,t)}function o(t){if(t)return{type:t.type,id:t.id}}return i.prototype={getGeneralTheme:function(){},getInnerPointer:function(e,n){var r=o(e);if(r){var a=t.isString(n)?n.split("."):n;r.innerPath=e.innerPath?e.innerPath.concat(a):a}return r},isSamePointer:function(t,e){return t&&e&&t.type===e.type&&t.id===e.id},getInnerPointerPathRoot:function(t){return t.innerPath?t.innerPath[0]:null},getOriginalPointerFromInner:o,getPointerType:function(e){switch(e.type){case"DESKTOP":case"MOBILE":return t.isEmpty(e.innerPath)?"component":"componentStructure";default:return e.type}}},i}),define("coreUtils/dal/DALFactory",["lodash","coreUtils/core/SiteDataPrivates","coreUtils/dal/DisplayedJsonDal","coreUtils/pointers/pointersCache","coreUtils/pointers/DataAccessPointers"],function(t,e,n,r,a){function i(e,n){var a=l.get(e);if(a&&a.pointersCache)return a.pointersCache;var i=c(e,n||t.pick(e,"pagesData")),o=new r(e,e,i,t.get(a,"mobxDataHandlers"));return l.set(e,t.assign(l.get(e),{pointersCache:o})),o}function o(t,e){var n=i(t,e);return new a(n)}function s(e,r){var a=l.get(e);if(a&&a.displayedJsonDal)return a.displayedJsonDal;var o=i(e,r),s=new n(e,o.getBoundCacheInstance(!1),t.get(a,"mobxDataHandlers"));return l.set(e,t.assign(l.get(e),{displayedJsonDal:s})),s}function c(e,n){var r=l.get(e);return r&&r.fullJson?r.fullJson:(l.set(e,t.assign(l.get(e),{fullJson:n})),n)}function u(e,n){var r=l.get(e);l.set(e,t.assign(r,{mobxDataHandlers:n}))}var l=new e;return{setMobxDataHandlers:u,getInstance:s,getCacheInstance:i,getPointersInstance:o,getFullPagesData:c}}),define("coreUtils/dal/siteDataUtils",["lodash","coreUtils/dal/DALFactory"],function(t,e){function n(t,n,r){var a=e.getInstance(t),i=["dynamicPages","routersRendererIndex"],o=n.pageId,s=t.isPopupPage(o),c={},u={};if(r&&(s||(c.primaryPage=null),c.popupPage=null),u[o]=n,t.isDynamicPage(o)){var l=a.getByPath(i);u[o].routersRendererIndex=n.pageAdditionalData+l,a.setByPath([i],l+1)}s?c.popupPage=n.pageId:(u[t.MASTER_PAGE_ID]=n,c.primaryPage=n.pageId),a.mergeByPath(["_currentRootInfos"],u),a.mergeByPath(["_currentPageIds"],c)}function r(t,n){return e.getInstance(t).getByPath(["_browserFlags",n])}function a(t,n){return e.getInstance(t).getByPath(["svgShapes",n])}function i(t){return"editor"===e.getInstance(t).getByPath(["renderFlags","componentViewMode"])}function o(t){return e.getInstance(t).getByPath(["renderFlags","isWixAdsAllowed"])}function s(t,n,r){return e.getInstance(t).setByPath(["svgShapes",n],r)}function c(t){var n=e.getInstance(t);return t.resolvedDataMaps&&n.isPathExist(["resolvedDataMaps","masterPage"]),n.isPathExist(["pagesData","masterPage","structure","mobileComponents"])}function u(e,n){if(!e.isPathExist(["wixappsRenderCounters"])){var r=t.set({},n,{});return void e.setByPath(["wixappsRenderCounters"],r)}e.isPathExist(["wixappsRenderCounters",n])||e.setByPath(["wixappsRenderCounters",n],{})}function l(t,n,r){r=r||"general";var a=e.getInstance(t),i=["wixappsRenderCounters",n,r];a.isPathExist(i)||(u(a,n),a.setByPath(i,0));var o=a.getByPath(i);a.setByPath(i,o+1)}function g(t){return e.getInstance(t).getByPath(["mapFromPageUriSeoToPageId"])}function d(t,n){var r=e.getInstance(t);return n?r.getByPath(["requestModel",n]):r.getByPath(["requestModel"])}function h(t,n,r){e.getInstance(t).setByPath(["customUrlMapping",n],r)}function p(n,r){var a=e.getInstance(n),i=n.getScreenSize();t.isEqual(i,r)||a.mergeByPath(["screenSize"],r)}function f(t,n){var r=e.getInstance(t);return n?r.getByPath(["rendererModel",n]):r.getByPath(["rendererModel"])}function P(n){var r=e.getInstance(n),a=["pagesData","masterPage","data","document_data"],i=r.getKeysByPath(a);return t.filter(i,function(t){var e=r.getByPath(a.concat([t,"type"]));return"Page"===e||"AppPage"===e})}return{incrementWixappsRenderCounter:l,setRootNavigationInfo:n,isMobileStructureExists:c,getBrowserFlag:r,setSvgShape:s,getSvgShape:a,isEditingMode:i,isWixAdsAllowed:o,getMapFromPageUriSeoToPageId:g,getRequestModel:d,getRendererModel:f,setCustomUrlMapping:h,getAllPageIds:P,updateScreenSize:p}}),define("coreUtils/core/wixUserApi",["lodash","coreUtils/core/languages","coreUtilsLib","coreUtils/dal/siteDataUtils"],function(t,e,n,r){function a(t){var e=o.parseCookieString(t)[c];if(e){var n=e.split("|");return{userName:n[0],email:n[1],mailStatus:n[2],permissions:n[3],isSessionNew:n[4],isSessionValid:n[5],userID:n[6]}}return null}function i(t){return o.parseCookieString(t)[s]}var o=n.cookieUtils,s="wixLanguage",c="wixClient";return{getUsername:function(t){var e=a(r.getRequestModel(t,"cookie"));return e?e.userName:null},getLanguage:function(n,r,a){var o=i(n||""),s=r.query&&r.query.lang||function(){var t=r.host.split(".");return 2===t[0].length?t[0]:null}()||o||function(){return"undefined"!=typeof window&&void 0!==window.navigator?window.navigator.language||window.navigator.browserLanguage:a}();return s&&(s=s.substring(0,2).toLowerCase()),t.includes(e,s)?s:"en"},isSessionValid:function(t){return!!a(t)},logout:function(t){var e=window.document?window.document.location.host:"";e=e.substring(e.indexOf(".")+1),o.deleteCookie(c,e),"undefined"!=typeof document&&(t.requestModel.cookie=window.document.cookie)},getLanguages:function(){return e}}}),define("coreUtils/core/imageAnalyzer",["lodash"],function(t){function e(){t.forEach(h,function(t){this[t]={}}.bind(this))}function n(t){for(var e=0,n=t.length/4,r=0;r<t.length;r+=4){var a=t[r]/255,i=t[r+1]/255,o=t[r+2]/255;e+=100*Math.max(a,i,o)/n}return e}function r(t){var e=n(t.data);postMessage(JSON.stringify(e))}function a(){return String(n)+("onmessage = "+String(r)+";")}function i(t,e,n){var r=new window.Image;r.crossOrigin="Anonymous",r.onload=function(){e(r)},r.onerror=n,r.src=t}function o(t,e){var n=window.document.createElement("canvas").getContext("2d");return n.drawImage(t,0,0),n.getImageData(0,0,e.width,e.height).data}function s(e,n,r){window.Worker||r("Browser does not support Web Workers");var i=new window.Blob([a()]),o=window.URL.createObjectURL(i),s=new window.Worker(o);s.onmessage=function(e){s.terminate();var a=JSON.parse(e.data);t.isFinite(a)?n(a):r()},s.onerror=r,s.postMessage(e)}function c(t,e,n,r){i(t,function(a){f.setReqStatus(h.BRIGHTNESS,t,p.PENDING),s(o(a,e),n,r)},r)}function u(){var t=window.document.createElement("canvas");return!(!t.getContext||!t.getContext("2d"))}function l(e){var n=f.getResultErrorCallbacks(h.BRIGHTNESS,e);f.remove(h.BRIGHTNESS,e),t.forEach(n,function(t){t()})}function g(e,n){var r=f.getResultSuccessCallbacks(h.BRIGHTNESS,e);f.setReqStatus(h.BRIGHTNESS,e,p.COMPLETE),f.setReqResult(h.BRIGHTNESS,e,n),t.forEach(r,function(t){t(n)}),f.clearResultCallbacks(h.BRIGHTNESS,e)}function d(e,n,r,a){switch(a=a||t.noop,r=r||t.noop,u()||a("HTML5 <canvas> is not supported in this browser"),f.getReqStatus(h.BRIGHTNESS,e)){case p.COMPLETE:r(f.getReqResult(h.BRIGHTNESS,e));break;case null:f.setReqStatus(h.BRIGHTNESS,e,p.INIT),f.registerCallbacksForResult(h.BRIGHTNESS,e,r,a),c(e,n,t.partial(g,e),t.partial(l,e));break;default:f.registerCallbacksForResult(h.BRIGHTNESS,e,r,a)}}var h={BRIGHTNESS:"brightness"},p={INIT:"init",PENDING:"pending",COMPLETE:"complete"};e.prototype={getReqResult:function(t,e){var n=this[t][e];return n&&n.status===p.COMPLETE?n.result:null},setReqResult:function(t,e,n){this[t][e]=this[t][e]||{},this[t][e].result=n},getReqStatus:function(t,e){var n=this[t][e];return n&&n.status||null},setReqStatus:function(t,e,n){this[t][e]=this[t][e]||{},this[t][e].status=n},remove:function(t,e){delete this[t][e]},registerCallbacksForResult:function(t,e,n,r){this[t][e]=this[t][e]||{};var a=this[t][e];a.callbacks=a.callbacks||{onSuccess:[],onError:[]},a.callbacks.onSuccess.push(n),a.callbacks.onError.push(r)},clearResultCallbacks:function(t,e){delete this[t][e].callbacks},getResultSuccessCallbacks:function(t,e){var n=this[t][e];return n&&n.callbacks&&n.callbacks.onSuccess||[]},getResultErrorCallbacks:function(t,e){var n=this[t][e];return n&&n.callbacks&&n.callbacks.onError||[]}};var f=new e;return{getImageMeanBrightness:d}}),define("coreUtils/core/imageUtils",["lodash","imageClientApi","coreUtils/core/imageAnalyzer"],function(t,e,n){function r(e,n){var r=t.get(e,"query",{}),a=t(r).keys().find(function(e){return t.includes(["devicepixelratio"],e.toLowerCase())});return Number(r[a])||n||1}function a(n,a,i,o,s){if(!n.containerWidth||!n.containerHeight||!n.imageData.uri)return{uri:"",css:{}};var c=n.imageData,u=n.displayMode||e.fittingTypes.SCALE_TO_FILL,l=t.defaults(n.quality||{},c.quality);o=r(i,o);var g=t.assign(t.pick(c,["width","height","crop"]),{id:c.uri}),d={width:n.containerWidth,height:n.containerHeight,htmlTag:s||"img",pixelAspectRatio:o,alignment:n.alignType||e.alignTypes.CENTER},h=e.getData(u,g,d,l);return h.uri=a(h.uri),(c.itemProp||n.addItemProp)&&(h.itemProp=c.itemProp||"image"),t.has(n,"labelledById")&&(h["aria-labelledby"]=n.labelledById),t.has(n,"describedById")&&(h["aria-describedby"]=n.describedById),h}function i(n,r,a){var i,s,c=r.width/r.height,u=a===e.fittingTypes.LEGACY_FIT_WIDTH,l=a===e.fittingTypes.LEGACY_FIT_HEIGHT;return u?(s=n.width/c,i=o(n.width,s)):i=l?o(n.height*c,n.height):t.clone(n),i}function o(t,e){return{width:Math.ceil(t),exactWidth:t,height:Math.ceil(e),exactHeight:e}}return{getContainerSize:i,getImageComputedProperties:a,getImageMeanBrightness:n.getImageMeanBrightness,alignTypes:e.alignTypes,fittingTypes:e.fittingTypes}}),define("coreUtils/core/scrollAnchorsUtils",["lodash","coreUtilsLib"],function(t,e){function n(t){var e=parseInt(t,10);return isNaN(e)?0:e}function r(t){return n(t.height.WIX_ADS)+n(t.top.WIX_ADS)}function a(e,n){var a=0,i=n.measureMap;if(i&&e){var o=e.compId,s=t.get(i,"custom.SITE_HEADER.isFixedPosition"),c=i.top[o],u=i.absoluteTop[o],l=s?c:u,g=r(i);a=t.isFinite(l)?l+g:0}return a}function i(t){if(!t.measureMap)return 1/0;var e=t.measureMap,n=e.siteMarginBottom||0,a=r(e),i=e.height.masterPage+n+a+t.renderFlags.extraSiteHeight,o=e.height.screen;return Math.max(i-o,0)}function o(t,e){return Math.min(t,i(e))}function s(n,r,a){var i=a.getPageData(r,["structure"]),o=e.dataUtils.getAllCompsInStructure(i);return t.find(o,function(e){var i=e.connectionQuery,o=i&&a.getDataByQuery(i,r,a.dataTypes.CONNECTIONS);return o&&t.find(o.items,{role:n})})}function c(e,n){var r;if(!t.startsWith(e,"dataItem")&&n){var a=n.getSiteData(),i=s(e,a.getPrimaryPageId(),a);i&&(r=i.dataQuery)}return r||e}function u(t,e){var n=e.getSiteData(),r=l(c(t,e),n);return r.y=o(r.y,n),r}function l(e,r){var i=0;return e===D.PAGE_ANCHORS.TOP_ANCHOR_ID?i=I:e===D.PAGE_ANCHORS.BOTTOM_ANCHOR_ID?i=n(t.get(r.measureMap,["height","masterPage"])):e&&(i=a(r.getDataByQuery(e,r.getPrimaryPageId()),r)),{x:0,y:i,anchorQuery:e}}function g(e,n){var r=t.find(e,{id:n});return r&&r.layout}function d(e,n,r){var a=e.getPageDataMap(n,e.dataTypes.DATA);if(!a)return[];var i=t.filter(a,{type:"Anchor"});i.push(h(e.getPrimaryPageId(),r));var o=e.getPageData(n,["structure","components"]);return t.sortBy(i,function(t){var e=g(o,t.compId);return e?e.y:E})}function h(t,e){return{compId:D.PAGE_ANCHORS.TOP_ANCHOR_COMP_ID,id:D.PAGE_ANCHORS.TOP_ANCHOR_ID,name:e||"",type:"Anchor",pageId:t}}function p(e,n){n=n||[];var r=d(e,e.getPrimaryPageId()),a=t.reject(r,function(e){return t.includes(n,e.compId)});return t.size(a)?a:[r[0]]}function f(e,n){return t(n).map(function(n){var r=l(n.id,e),a=n.id;return t.assign(r,{id:a})}).sortBy("y").value()}function P(t,e,n){return{activeAnchorComp:t,index:e,total:n}}function m(e,n){if(t.every(e,{y:0}))return null;for(var r=null,a=0;a<e.length;a++){var i=e[a];if(!(n>=i.y))break;r=i}return r?P(r,a-1,e.length):null}function v(e,n,r){if(!e.measureMap)return null;var a=f(e,p(e,r)),o=m(a,n);return o&&i(e)<=n?P(t.last(a),a.length-1,a.length):o}function y(t){return t===D.PAGE_ANCHORS.BOTTOM_ANCHOR_ID||t===D.PAGE_ANCHORS.TOP_ANCHOR_ID}var D=e.siteConstants,E=-99999,I=0;return{getPageTopAnchor:h,calcAnchorScrollToPosition:u,getPageAnchors:d,getActiveAnchor:v,getAnchor:s,normalizeYOffset:o,isSpecialAnchor:y,getSortedAnchorsByY:f,SCROLL_PAGE_TOP_Y_POS:E}}),define("coreUtils/core/anchorTagsGenerator",["lodash","coreUtilsLib"],function(t,e){function n(e,n){if(!t.some(n))return e;var a=r(e);return t.forEach(a.textNodes,t.partial(s,t,n)),a.container.innerHTML}function r(t){var e=d.document.createDocumentFragment().appendChild(d.document.createElement("div"));return e.innerHTML=t,{container:e,textNodes:a(e)}}function a(t,e){if(e=e||[],i(t)&&e.push(t),o(t))return e;for(t=t.firstChild;t;)a(t,e),t=t.nextSibling;return e}function i(t){return t.nodeType===d.Node.TEXT_NODE}function o(t){return t.nodeType===d.Node.ELEMENT_NODE&&"a"===t.tagName.toLowerCase()}function s(e,n){var r=[],a=e.parentNode,i=e.data,o=h.findAll(i,n);0!==o.length&&(t(o).orderBy("index","desc").forEach(function(t){r.push(d.document.createTextNode(i.slice(t.index+t.key.length))),r.push(c(t)),i=i.slice(0,t.index)}),r.push(d.document.createTextNode(i)),t.forEach(r.reverse(),function(t){a.insertBefore(t,e)}),a.removeChild(e))}function c(e){var n=u(e),r=d.document.createElement("a");r.innerHTML=e.key,r.classList.add(n.className),t.forEach(t.omit(n,["className"]),function(t,e){r.setAttribute(e,t)});var a=d.document.createElement("object");return a.appendChild(r),a.setAttribute("height",0),a}function u(e){var n={"data-auto-recognition":"true","data-content":e.key,className:"auto-generated-link"};switch(e.pattern){case h.Pattern.PHONE:return t.assign(n,{href:"tel:"+e.value,"data-type":"phone"});case h.Pattern.MAIL:return t.assign(n,{href:"mailto:"+e.value,"data-type":"mail"});case h.Pattern.URL:return t.assign(n,{href:e.value,target:"_blank","data-type":"external"});default:throw"Unknown Pattern: "+e.pattern}}function l(e,n){if(!t.some(n))return[];var a=r(e);return t(a.textNodes).map("data").flatMap(t.partial(h.findAll,t,n)).map(u).value()}function g(t,e){var n={};return n[p.PHONE]=e,n[p.MAIL]=!0,n[p.URL]=!0,n}var d=e.fragment,h=e.textPatternRecognizer,p=e.textPatternRecognizer.Pattern;return{generateAnchorsInHtml:n,findDataForAnchors:l,getIncludedPatterns:g}}),define("coreUtils/pointers/aspectsPointers",["lodash","coreUtils/pointers/pointerGeneratorsRegistry"],function(t,e){var n=["siteAspectsData"];e.registerPointerType("siteAspects",t.constant(null),t.constant(!0));var r={getAspectGlobalData:function(t,e,r){return e.getPointer(r+"_globalData","siteAspects",n.concat([r,"globalData"]))},getAspectAllComponentsData:function(t,e,r){return e.getPointer(r+"_allCompsData","siteAspects",n.concat([r,"dataByCompId"]))},getAspectComponentData:function(t,e,r,a){return e.getPointer(r+"_compData_"+a,"siteAspects",n.concat([r,"dataByCompId",a]))}};e.registerDataAccessPointersGenerator("siteAspects",r)}),define("coreUtils/core/constants",[],function(){return{VIEW_MODES:{DESKTOP:"DESKTOP",MOBILE:"MOBILE"},DATA_TYPES:{data:"data",prop:"props",design:"design",theme:"style",behaviors:"behaviors",connections:"connections"},COMP_DATA_QUERY_KEYS:{data:"dataQuery",props:"propertyQuery",design:"designQuery",behaviors:"behaviorQuery",connections:"connectionQuery"},PAGE_DATA_DATA_TYPES:{props:"component_properties",data:"document_data",design:"design_data",behaviors:"behaviors_data",connections:"connections_data",style:"theme_data"},ACTION_TYPES:{CLICK:"click",DBL_CLICK:"dblClick",MOUSE_IN:"mouseenter",MOUSE_OUT:"mouseleave",CHANGE:"change",BLUR:"blur",FOCUS:"focus",IMAGE_CHANGED:"imageChanged",IMAGE_EXPANDED:"imageExpanded",ITEM_CLICKED:"itemClicked",CELL_SELECT:"cellSelect",CELL_EDIT:"cellEdit",ROW_SELECT:"rowSelect",FETCH_DATA:"fetchData",DATA_CHANGE:"dataChange",AUTOPLAY_OFF:"autoplayOff",AUTOPLAY_ON:"autoplayOn",KEY_PRESS:"keyPress",SCREEN_IN:"screenIn",VIEWPORT_ENTER:"viewportEnter",VIEWPORT_LEAVE:"viewportLeave",SCROLL:"scroll",VALIDATE:"validate",SET_CUSTOM_VALIDITY:"setCustomValidity",SYNC_VALIDATION_DATA:"syncValidationData",UPDATE_VALIDITY_INDICATION:"updateValidityIndication",MESSAGE:"message",UPLOAD_COMPLETE:"uploadComplete"},BASE_PROPS_SCHEMA_TYPE:"DefaultProperties",COMP_IDS:{PAGE_GROUP:"SITE_PAGES",PAGES_CONTAINER:"PAGES_CONTAINER",HEADER:"SITE_HEADER",FOOTER:"SITE_FOOTER",BACKGROUND:"SITE_BACKGROUND"},POPUP:{POPUP_OVERLAY_CONTAINER:{STYLE_ID:"strc1",SKINPART_ID:"popupOverlayContainer",COMPONENT_TYPE:"wysiwyg.viewer.components.StripContainer",SKIN:"wysiwyg.viewer.skins.stripContainer.DefaultStripContainer",TYPE:"StripContainer"},POPUP_CONTAINER:{COMPONENT_TYPE:"wysiwyg.viewer.components.PopupContainer"}},ACTIVE_ANCHOR:{DELAY_TO_END_SCROLL:50},CURRENT_CONTEXT:"CURRENT_CONTEXT",ANCHORS:{LOCK_THRESHOLD:70,LOCK_CONDITION:{ALWAYS:"always",NEVER:"never",THRESHOLD:"threshold"}},SUPPORTED_DYNAMIC_ACTIONS:{chat:{appId:"14517e1a-3ff0-af98-408e-2bd6953c36a2",icon:"55ef598f51c14f36ba4f0690cf28626f",color:"#2D41A9",text:"chat"}}}}),define("coreUtils/pointers/jsonItemsFinders",["coreUtils/core/constants"],function(t){function e(e,n){return n===t.VIEW_MODES.MOBILE?e.mobileComponents?"mobileComponents":"components":e.children?"children":"components"}function n(t,e){return e.id===t||"masterPage"===t&&e.children}function r(t,a,i,o){if(n(a,t))return o;var s=e(t,i),c=t[s];if(!c)return null;for(var u=null,l=0;l<c.length&&!u;l++)u=r(c[l],a,i,o.concat([s,l]));return u}return{getChildrenPropertyName:e,getComponentPath:function(t,e,n){return r(t,e,n,[])},getDataPath:function(){},isComponentWithId:n}}),define("coreUtils/pointers/componentPointers",["lodash","coreUtils/core/constants","coreUtils/pointers/DataAccessPointers","coreUtils/pointers/pointerGeneratorsRegistry","coreUtils/pointers/jsonItemsFinders"],function(t,e,n,r,a){function i(t){return["pagesData",t,"structure"]}function o(e){return t.isArray(e)&&"pagesData"===e[e.length-3]}function s(t,e,n){var r=t(i(n));if(r){var o=a.getComponentPath(r,e.id,e.type);return o&&(o=i(n).concat(o)),o}}function c(e,n,r){var a;if(t.forEach(e,function(t){a=a||s(n,r,t)}),!a){var i=t.keyBy(e);t.forOwn(n(["pagesData"]),function(t,e){return!!i[e]||!(a=s(n,r,e))&&void 0})}return a}var u=new n;r.registerPointerType(e.VIEW_MODES.DESKTOP,c,a.isComponentWithId,!0,!0),r.registerPointerType(e.VIEW_MODES.MOBILE,c,a.isComponentWithId,!0,!0);var l={getMobilePointer:function(n,r,a){return t.assign(t.clone(a),{type:e.VIEW_MODES.MOBILE})},getDesktopPointer:function(n,r,a){return t.assign(t.clone(a),{type:e.VIEW_MODES.DESKTOP})},isMobile:function(t,n,r){return r.type===e.VIEW_MODES.MOBILE},isPage:function(t,e,n){return o(e.getPath(n))},isPagesContainer:function(t,n,r){return r.id===e.COMP_IDS.PAGES_CONTAINER},isMasterPage:function(t,e,n){var r=e.getPath(n);return!!r&&("masterPage"===r[1]&&this.isPage(t,e,n))},isInMasterPage:function(t,e,n){return"masterPage"===e.getPath(n)[1]},getViewMode:function(t,n,r){return this.isMobile(t,n,r)?e.VIEW_MODES.MOBILE:e.VIEW_MODES.DESKTOP},getChildrenContainer:function(t,e,n){var r=t(e.getPath(n)),i=a.getChildrenPropertyName(r,n.type),o=u.getOriginalPointerFromInner(n);return o.innerPath=[i],o},getChildren:function(e,n,r){var i=n.getPath(r),o=e(i),s=a.getChildrenPropertyName(o,r.type),c=o[s];return t.map(c,function(t,e){return n.getPointer(t.id,r.type,i.concat([s,e]))})},getChildrenRecursively:function(t,e,n){for(var r=this.getChildren(t,e,n),a=0;a<r.length;)r.push.apply(r,this.getChildren(t,e,r[a])),a++;return r},getChildrenRecursivelyRightLeftRootIncludingRoot:function(t,e,n){for(var r=[n],a=[];r.length;){var i=r.shift();a.unshift(i),r=this.getChildren(t,e,i).concat(r)}return a},getParent:function(e,n,r){var a=n.getPath(r);if(!a||o(a))return null;var i=t.dropRight(a,2),s=e(i);return s&&n.getPointer(s.id,r.type,i)},getSiblings:function(e,n,r){var a=this.getParent(e,n,r);if(!a)return[];var i=this.getChildren(e,n,a);return t.remove(i,{id:r.id}),i},getComponent:function(t,e,n,r){var i=r.type,o=e.getPointer(n,i);if(!o){var s=e.getPath(r),c=t(s),u=a.getComponentPath(c,n,i);u&&(o=e.getPointer(n,i,s.concat(u)))}return o},getMasterPage:function(t,e,n){return this.getPage(t,e,"masterPage",n)},getPage:function(t,e,n,r){var a=r,o=e.getPointer(n,a);if(!o){var s=i(n);if(!t(s))return null;o=e.getPointer(n,a,s)}return o},getNewPage:function(t,n,r,a){var o=a||e.VIEW_MODES.DESKTOP,s=i(r);if(t(s))throw new Error("there is already a page with id "+r);return n.getPointer(r,o,s)},getPagesContainer:function(t,n,r){var a=this.getMasterPage(t,n,r);return this.getComponent(t,n,e.COMP_IDS.PAGES_CONTAINER,a)},getFooter:function(t,n,r){var a=this.getMasterPage(t,n,r);return this.getComponent(t,n,e.COMP_IDS.FOOTER,a)},getHeader:function(t,n,r){var a=this.getMasterPage(t,n,r);return this.getComponent(t,n,e.COMP_IDS.HEADER,a)},getUnattached:function(t,e,n,r){return e.getPointer(n,r,[])},getPageOfComponent:function(t,e,n){var r=e.getPath(n);if(!r)return null;var a=r[1];return this.getPage(t,e,a,n.type)},isDescendant:function(e,n,r,a){var i=n.getPath(r),o=n.getPath(a);if(i&&o){var s=o.length;return i.length>s&&t.isEqual(i.slice(0,s),o)}return!1}};r.registerDataAccessPointersGenerator("components",l,!0)}),define("coreUtils/pointers/componentStructurePointers",["lodash","coreUtils/pointers/DataAccessPointers","coreUtils/pointers/pointerGeneratorsRegistry"],function(t,e,n){var r=new e,a={getModes:function(t,e,n){return r.getInnerPointer(n,["modes"])},getModesDefinitions:function(t,e,n){return r.getInnerPointer(n,["modes","definitions"])},getModesOverrides:function(t,e,n){return r.getInnerPointer(n,["modes","overrides"])}};n.registerDataAccessPointersGenerator("componentStructure",a)}),define("coreUtils/pointers/dataPointers",["lodash","coreUtils/core/constants","coreUtils/pointers/pointerGeneratorsRegistry"],function(t,e,n){function r(){return!0}function a(e,n,r,a){var s=i(e),c=r(["pagesData"]);return t.reduce(c,function(t,n,i){var c=o(e,i,s).concat(a.id);return!t&&r(c)?c:t},null)}function i(t){switch(t){case s.data:return"document_data";case s.design:return"design_data";case s.prop:return"component_properties";case s.theme:return"theme_data";case s.behaviors:return"behaviors_data";case s.connections:return"connections_data";default:throw new Error("there is no such data type "+t)}}function o(t,e,n){return["pagesData",e,"data",n||i(t)]}var s=e.DATA_TYPES;n.registerPointerType(s.data,a.bind(null,s.data),r,!1,!0),n.registerPointerType(s.prop,a.bind(null,s.prop),r,!1,!0),n.registerPointerType(s.design,a.bind(null,s.design),r,!1,!0),n.registerPointerType(s.theme,a.bind(null,s.theme),r,!1,!0),n.registerPointerType(s.behaviors,a.bind(null,s.behaviors),r,!1,!0),n.registerPointerType(s.connections,a.bind(null,s.connections),r,!1,!0);var c={getDataItem:function(t,e,n,r){return this.getItem(t,e,s.data,n,r)},getDataItemWithPredicate:function(e,n,r,a){return t.head(this.getDataItemsWithPredicate(e,n,r,a))},getDataItemsWithPredicate:function(e,n,r,a){var i=a||"masterPage",c=o(s.data,i),u=e(c);return u=u.toJS?u.toJS():u,t.map(t.filter(u,r),function(t){return this.getDataItem(e,n,t.id,i)}.bind(this))},getDesignItem:function(t,e,n,r,a){return this.getItem(t,e,s.design,n,r,a)},getPropertyItem:function(t,e,n,r,a){return this.getItem(t,e,s.prop,n,r,a)},getBehaviorsItem:function(t,e,n,r){return this.getItem(t,e,s.behaviors,n,r)},getConnectionsItem:function(t,e,n,r){return this.getItem(t,e,s.connections,n,r)},getThemeItem:function(t,e,n){return this.getItem(t,e,s.theme,n,"masterPage")},getItem:function(t,e,n,r,a,i){var s=o(n,a);return s.push(r),e.getPointer(r,n,s,i)},getDataItemFromMaster:function(t,e,n){return this.getDataItem(t,e,n,"masterPage")},getPageIdOfData:function(t,e,n){return e.getPath(n)[1]},validatePath:function(t,e,n){return!!e.getPath(n)}};n.registerDataAccessPointersGenerator("data",c)}),define("coreUtils/pointers/generalPointers",["lodash","coreUtils/pointers/pointerGeneratorsRegistry"],function(t,e){var n="general";e.registerPointerType(n,t.constant(null),t.constant(!0)),e.registerPointerType("metadata",t.constant(null),t.constant(!0));var r={getAllTheme:{id:"theme",path:["pagesData","masterPage","data","theme_data"]},getOrphanPermanentDataNodes:{id:"orphanPermanentDataNodes",path:["orphanPermanentDataNodes"]},getTextRuntimeOverallBorders:{id:"overallBorders",path:["textRuntimeLayout","overallBorders"]},getDockedRuntimeLayout:{id:"dockedRuntimeLayout",path:["dockedRuntimeLayout"]},getNoEnforceAnchorsPointer:{id:"noEnforceAnchors",path:["noEnforceAnchors"]},getSaveInvalidationCount:{id:"saveInvalidationCount",path:["saveInvalidationCount"]},getPagesData:{id:"pagesData",path:["pagesData"]},getServiceTopology:{id:"serviceTopology",path:["serviceTopology"]},getCommittedMobilePages:{id:"committedMobilePages",path:["committedMobilePages"]},getDeletedPagesMapPointer:{id:"deletedPagesMap",path:["deletedPagesMap"]},getUserId:{id:"userId",path:["rendererModel","userId"]},getIsStudioUser:{id:"isStudioUser",path:["documentServicesModel","userInfo","isStudio"]},getEditorData:{id:"editorData",path:["editorData"]},getMobileStructuresPointer:{id:"mobileStructures",path:["mobileStructures"]},getCompsToUpdateAnchors:{id:"compsToUpdateAnchors",path:["compsToUpdateAnchors"]},getRuntimePointer:{id:"runtime",path:["runtime"]},getNeverSaved:{id:"neverSaved",path:["documentServicesModel","neverSaved"]},getPublicUrl:{id:"publicUrl",path:["documentServicesModel","publicUrl"]},getPermissions:{id:"permissions",path:["documentServicesModel","permissionsInfo"]},getForbiddenPageUriSEOs:{id:"forbiddenPageUriSEOs",path:["urlFormatModel","forbiddenPageUriSEOs"]},getUrlFormat:{id:"urlFormat",path:["urlFormatModel","format"]},getClientSpecMap:{id:"clientSpecMap",path:["rendererModel","clientSpecMap"]},getAutosaveInfo:{id:"autoSaveInfo",path:["documentServicesModel","autoSaveInfo"]},getSiteVersion:{id:"siteVersion",path:["documentServicesModel","version"]},getMetaSiteId:{id:"metaSiteId",path:["rendererModel","metaSiteId"]},getDocumentType:{id:"documentType",path:["rendererModel","siteInfo","documentType"]},getActiveModes:{id:"activeModes",path:["activeModes"]},getContactFormsMetaData:{id:"contactformsMetaData",path:["contactforms_metadata"]},getRootsRenderedInMobileEditor:{id:"rootsRenderedInMobileEditor",path:["rootsRenderedInMobileEditor"]},getRenderFlags:{id:"renderFlags",path:["renderFlags"]},getRoutersPointer:{id:"routers",path:["routers"]},getSantaBase:{id:"santaBase",path:["santaBase"]}};Object.freeze(r);var a={getRenderFlag:function(t,e,r){return e.getPointer("renderFlags"+r,n,["renderFlags",r])},getRenderRealtimeConfigItem:function(t,e,r){return e.getPointer("renderRealtimeConfig"+r,n,["renderRealtimeConfig",r])},getAutoSaveInnerPointer:function(t,e,r){return e.getPointer("autoSaveInfo"+r,n,["documentServicesModel","autoSaveInfo",r])},getMediaQualityItemPointer:function(t,e,r){return e.getPointer("mediaQualityStore"+r,n,["mediaQualityStore",r])},getMediaPlaybackItemPointer:function(t,e,r){return e.getPointer("mediaStore"+r,n,["mediaStore",r])}},i=t(r).mapValues(function(t){return function(e,r){return r.getPointer(t.id,n,t.path)}}).assign(a).value();Object.freeze(i),e.registerDataAccessPointersGenerator(n,i)}),define("coreUtils/pointers/platformPointers",["lodash","coreUtils/pointers/pointerGeneratorsRegistry","coreUtils/pointers/DataAccessPointers"],function(t,e,n){function r(t,e){return e.getPointer("platform",g,["platform"])}function a(t,e){var n=r(t,e);return d.getInnerPointer(n,"appState")}function i(t,e,n){return e.getPointer(n+" state",g,["platform","appState",n])}function o(t,e,n){return e.getPointer("appManifest "+n,g,["platform","appManifest",n])}function s(t,e,n,r,a){return e.getPointer("controllerStageData "+n+r+a,g,["platform","appManifest",n,"controllersStageData",r,a])}function c(t,e,n){return e.getPointer(n+"_widgetState",g,["platformWidgetsState",n])}function u(t,e){return e.getPointer("pagesPlatformApplications",g,["pagesPlatformApplications"])}function l(t,e,n){return e.getPointer(n+" pages",g,["pagesPlatformApplications",n])}var g="platform",d=new n;e.registerPointerType(g,t.constant(null),t.constant(!0));var h=Object.freeze({getPlatformPointer:r,getAppStatePointer:a,getControllerStatePointer:i,getControllerStageDataPointer:s,getAppManifestPointer:o,getPlatformWidgetStatePointer:c,getPagesPlatformApplicationsPointer:u,getPagesPlatformApplicationPointer:l});e.registerDataAccessPointersGenerator(g,h)}),define("coreUtils/pointers/activeModesPointers",["lodash","coreUtils/pointers/pointerGeneratorsRegistry"],function(t,e){e.registerPointerType("activeModes",t.constant(null),t.constant(!0));var n={getAllActiveModes:function(t,e){return e.getPointer("activeModes","activeModes",["activeModes"])},getPageActiveModes:function(t,e,n){return e.getPointer(n,"activeModes",["activeModes",n])}};e.registerDataAccessPointersGenerator("activeModes",n)}),define("coreUtils/pointers/pagePointers",["lodash","coreUtils/pointers/pointerGeneratorsRegistry","experiment"],function(t,e,n){e.registerPointerType("page",function(){return null},function(){return!0},!1,!0);var r={isPointerPageType:function(t,e,n){return n&&"page"===n.type},getNewPagePointer:function(t,e,n){var r=["pagesData",n];return e.getPointer(n,"page",r)},getPagePointer:function(e,n,r){var a=["pagesData",r],i=e(a);return t.isUndefined(i)?null:n.getPointer(r,"page",a)},isExists:function(e,n,r){var a=e(["pagesData",r]);return!t.isUndefined(a)},getAllPagesPointer:function(t,e){return e.getPointer("all","page",["pagesData"])},getNonDeletedPagesPointers:function(e,n,r){r=!t.isUndefined(r)&&r;var a=["pagesData"],i=e(a);return i=t.pickBy(i,function(t,e){return!!t&&!(!r&&"masterPage"===e)}),t.map(i,function(t,e){return n.getPointer(e,"page",a.concat(e))})},getPageData:function(t,e,n){var r=["pagesData",n,"data","document_data"];return t(r)?e.getPointer(n+"_data","page",r):null},getPageProperties:function(t,e,n){var r=["pagesData",n,"data","component_properties"];return t(r)?e.getPointer(n+"_prop","page",r):null},getPageDesignData:function(t,e,n){var r=["pagesData",n,"data","design_data"];return t(r)?e.getPointer(n+"_design","page",r):null},getResolvedDataMapsPointer:function(t,e){return e.getPointer("resolvedDataMaps","page",["resolvedDataMaps"])},getPageBehaviorsData:function(t,e,n){var r=["pagesData",n,"data","behaviors_data"];return t(r)?e.getPointer(n+"_design","page",r):null}};n.isOpen("sv_multilingual")&&(r.getPageTranslations=function(t,e,n){var r=["pagesData",n,"translations"];return e.getPointer(n+"_translations","page",r)}),e.registerDataAccessPointersGenerator("page",r)}),define("coreUtils/pointers/compBehavioursPointers",["lodash","coreUtils/pointers/pointerGeneratorsRegistry"],function(t,e){e.registerPointerType("compBehaviours",t.constant(null),t.constant(!0));var n={getCompBehavioursMapPointer:function(t,e){return e.getPointer("compBehavioursMap","compBehaviours",["compBehavioursMap"])},getCompBehaviourPointer:function(t,e,n,r){return e.getPointer("compBehavioursMap_"+n+"_"+r,"compBehaviours",["compBehavioursMap",n,r])}};e.registerDataAccessPointersGenerator("compBehaviours",n)}),define("coreUtils/pointers/pointers",["coreUtils/pointers/pointerGeneratorsRegistry","coreUtils/pointers/pointersCache","coreUtils/pointers/DataAccessPointers","coreUtils/pointers/aspectsPointers","coreUtils/pointers/componentPointers","coreUtils/pointers/componentStructurePointers","coreUtils/pointers/dataPointers","coreUtils/pointers/generalPointers","coreUtils/pointers/platformPointers","coreUtils/pointers/activeModesPointers","coreUtils/pointers/pagePointers","coreUtils/pointers/compBehavioursPointers"],function(t,e,n){return{pointerGeneratorsRegistry:t,PointersCache:e,DataAccessPointers:n}}),define("coreUtils/core/routerUtils",["lodash"],function(t){function e(e,n){return t.some(e,function(e){return t.includes(t.values(e.pages),n)})}return{isDynamicPage:e}}),define("coreUtils/core/renderUtils",["lodash"],function(t){function e(e,n,r){var a=r?t.bind(n,r):n,i=t.keys(e).sort(),o=t.reduce(i,function(t,n){return t[n]=e[n],t},{});return t.map(o,a)}return{mapInAlphabeticalOrder:e}}),define("coreUtils",["lodash","coreUtils/core/ajaxLibrary","coreUtils/core/domMeasurements","coreUtils/core/wixUserApi","coreUtils/core/languages","coreUtils/core/imageUtils","coreUtils/core/scrollAnchorsUtils","coreUtils/core/anchorTagsGenerator","coreUtils/dal/DisplayedJsonDal","coreUtils/pointers/pointers","coreUtils/core/constants","coreUtils/core/SiteDataPrivates","coreUtils/dal/siteDataUtils","coreUtils/dal/DALFactory","coreUtils/core/SessionFreezer","coreUtils/core/routerUtils","coreUtils/core/pathValidationUtil","coreUtilsLib","coreUtils/core/renderUtils"],function(t,e,n,r,a,i,o,s,c,u,l,g,d,h,p,f,P,m,v){return{renderDoneMixin:m.renderDoneMixin,htmlTransformer:m.htmlTransformer,textSecurityFixer:m.textSecurityFixer,htmlParser:m.htmlParser,throttleUtils:m.throttleUtils,keyboardUtils:m.keyboardUtils,classNames:m.classNames,cookieUtils:m.cookieUtils,imageUtils:i,tween:m.tween,urlUtils:m.urlUtils,Store:m.StoreNew,mobileViewportFixer:m.mobileViewportFixer,dataUtils:m.dataUtils,dateTimeUtils:m.dateTimeUtils,validationUtils:m.validationUtils,ajaxLibrary:e,cssUtils:m.cssUtils,hashUtils:m.hashUtils,guidUtils:m.guidUtils,arrayUtils:m.arrayUtils,stringUtils:m.stringUtils,mediaZoomCalculations:m.mediaZoomCalculations,objectUtils:m.objectUtils,animationFrame:m.animationFrame,scrollAnchors:o,domMeasurements:n,storage:m.storage,style:m.style,galleriesCommonLayout:m.galleriesCommonLayout,requestsUtil:m.requestsUtil,boundingLayout:m.boundingLayout,verticalMenuCalculations:m.verticalMenuCalculations,nonPageItemZoom:m.nonPageItemZoom,appPartMediaInnerViewNameUtils:m.appPartMediaInnerViewNameUtils,reactComponentUtils:m.reactComponentUtils,dockUtils:m.dockUtils,viewportUtils:m.viewportUtils,containerBackgroundUtils:m.containerBackgroundUtils,math:m.math,functionUtils:m.functionUtils,mediaConsts:m.mediaConsts,balataConsts:m.mediaConsts.balataConsts,blogAppPartNames:m.blogAppPartNames,wixUserApi:r,languages:a,siteConstants:m.siteConstants,textPatternRecognizer:m.textPatternRecognizer,anchorTagsGenerator:s,errorPages:m.errorPages,logWixCodeConsoleMessage:m.logWixCodeConsoleMessage,logWixCodeConsoleError:m.logWixCodeConsoleError,matrix:{calculations:m.matrix.calculations,scalingCalculations:m.matrix.scalingCalculations},fragment:m.fragment,dynamicPagesUtils:m.dynamicPagesUtils,Screenfull:m.Screenfull,SimpleDrag:m.SimpleDrag,DisplayedJsonDal:c,setMobxDataHandlers:function(e,n){h.setMobxDataHandlers(e,n),P.setMobxDataHandlers(e,t.pick(n,"getObservableByPath"))},pointers:u,constants:l,SiteDataPrivates:g,siteDataUtils:d,sessionFreezer:p,DALFactory:h,routerUtils:f,renderUtils:v}});
//# sourceMappingURL=coreUtils.min.js.map