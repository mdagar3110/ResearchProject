"use strict";define("wPhoto/santaTypes/wPhotoSantaTypes",["react","santaProps","siteUtils"],function(t,n,i){function e(t,e,o){var a=n.Types.Link.linkRenderInfo.fetch(t,e),s=n.Types.Component.rootNavigationInfo.fetch(t,e);return i.linkRenderer.renderImageZoomLink(a,s,o,null,e.structure.propertyQuery,null)}function o(t,e,o){var a=n.Types.Link.linkRenderInfo.fetch(t,e),s=n.Types.Component.rootNavigationInfo.fetch(t,e);return i.linkRenderer.renderLink(o,a,s)}return{Link:n.createSantaType(t.PropTypes.object,function(t,i){var a=n.Types.Component.compData.fetch(t,i),s=n.Types.Component.compProp.fetch(t,i).onClickBehavior;return"zoomMode"===s?e(t,i,a):!a.link||"goToLink"!==s&&s?null:o(t,i,a.link)},!0)}}),define("wPhoto",["lodash","react","core","santaProps","wPhoto/santaTypes/wPhotoSantaTypes","utils","image","zoomedImage"],function(t,n,i,e,o,a,s,r){function c(i,e){var o={style:{}};return o.style.width=e.width,o.style.height=e.height,i?(o.style.cursor="pointer",t.assign(o,i)):o.parentConst=n.DOM.div,o}function p(t,n){return this.createChildComponent(this.props.compData,t,"img",n)}function h(t,n){return{id:t.id+"img",ref:"img",containerWidth:n.width,containerHeight:n.height,displayMode:w[t.compProp.displayMode]||t.compProp.displayMode,filterEffect:t.compProp.filterEffect,imageData:t.compData,addItemProp:t.addItemProp}}function d(n,i,e){var o;return this.state.isInZoom?(n.className=this.classSet({zoomedin:!0}),n.initialClickPosition=this.state.initialClickPosition,o=p.call(this,"core.components.ZoomedImage",n),i.onMouseLeave=u.bind(this),i.onMouseEnter=f.bind(this)):(n.className=this.classSet({zoomedout:!0}),o=p.call(this,"core.components.Image",n),i.onMouseLeave=t.noop,i.onMouseEnter=t.noop),t.assign(e,i),o}function l(t,n,i,e){var o=h(this.props,t),a={onClick:m.bind(this)};return!i||P(n,t)?p.call(this,"core.components.Image",o):d.call(this,o,a,e)}function g(n,i,e,o){var a={style:t.cloneDeep(n)};return a.style.width=i.width,a.style.height=i.height,a["data-exact-height"]=i.exactHeight,a["data-content-padding-horizontal"]=e.contentPaddingHorizontal,a["data-content-padding-vertical"]=e.contentPaddingVertical,a.title=o,a}function m(t){var n=this,i=this.state.isInZoom;this.registerReLayout(),i?this.refs.img.zoomOut(function(){n.setState({isInZoom:!i})}):this.setState({isInZoom:!i,initialClickPosition:{clientX:t.clientX,clientY:t.clientY}})}function u(t){var n=this;f.call(this),this.zoomTimer=setTimeout(function(){m.apply(n,[t])},v)}function f(){clearTimeout(this.zoomTimer)}function P(t,n){return t.width<n.width||t.height<n.height}function y(t,n){var i={},e=parseInt(t.contentPaddingLeft.value||0,10)+parseInt(n.contentPaddingLeft||0,10),o=parseInt(t.contentPaddingRight.value||0,10)+parseInt(n.contentPaddingRight||0,10),a=parseInt(t.contentPaddingTop.value||0,10)+parseInt(n.contentPaddingTop||0,10),s=parseInt(t.contentPaddingBottom.value||0,10)+parseInt(n.contentPaddingBottom||0,10);return i.contentPaddingHorizontal=e+o,i.contentPaddingVertical=a+s,i}function T(t,n){var i=t.width-n.contentPaddingHorizontal,e=t.height-n.contentPaddingVertical;return{width:i>0?i:16,height:e>0?e:16}}function I(t,n){return{width:t.width+n.contentPaddingHorizontal,height:t.height+n.contentPaddingVertical,exactHeight:(t.exactHeight||t.height)+n.contentPaddingVertical}}var k=i.compMixins,v=1200,w={fitWidthStrict:a.imageUtils.fittingTypes.LEGACY_FIT_WIDTH,fitHeightStrict:a.imageUtils.fittingTypes.LEGACY_FIT_HEIGHT};return{displayName:"WPhoto",propTypes:t.assign({id:e.Types.Component.id,compData:e.Types.Component.compData.isRequired,compProp:e.Types.Component.compProp.isRequired,structure:e.Types.Component.structure,link:o.Link},e.santaTypesUtils.getSantaTypesByDefinition(s),e.santaTypesUtils.getSantaTypesByDefinition(r)),statics:{useSantaTypes:!0},mixins:[k.skinBasedComp,k.skinInfo,k.animationsMixin],getInitialState:function(){return this.zoomTimer=null,{isInZoom:!1}},getSkinProperties:function(){var n=this.props.compProp.onClickBehavior,i=this.props.compProp.displayMode,e=t.pick(this.props.style,["width","height"]),o={width:this.props.compData.width,height:this.props.compData.height},s=y(this.getParams(["contentPaddingLeft","contentPaddingRight","contentPaddingBottom","contentPaddingTop"]),this.getSkinExports()),r=a.imageUtils.getContainerSize(T(e,s),o,w[i]||i),p=I(r,s),h=g(this.props.style,p,s,this.props.compData.title);return{"":h,img:l.call(this,r,o,"zoomAndPanMode"===n,h),link:c(this.props.link,r)}},getDefaultSkinName:function(){return"wysiwyg.viewer.skins.photo.DefaultPhoto"}}});
//# sourceMappingURL=wPhoto.min.js.map